<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reservasi - RescueGo</title>
    <link rel="icon" href="assets/img/RescueGo-SideBarLogo.svg" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap");
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen pb-32">
    <header class="bg-[#5B2EFF] text-white px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <img src="assets/img/RescueGo-SideBarLogo.svg" alt="RescueGo Logo" class="h-8" />
        <span class="font-bold text-lg">RescueGo</span>
      </div>
      <img src="assets/img/AvatarProfile-MockUp.svg" alt="Avatar" class="h-10 w-10 rounded-full" />
    </header>

    <main class="px-6 py-6">
      <div class="flex justify-between items-center mb-4">
        <h1 class="text-xl font-bold text-gray-800">Reservasi Kamu</h1>
        <a href="reservation_detail.html" class="bg-[#5B2EFF] text-white text-sm px-4 py-2 rounded-md font-semibold hover:bg-indigo-700"> Buat Reservasi </a>
      </div>

      <section class="mb-6">
        <h2 class="text-sm font-semibold text-gray-700 mb-2">Reservasi saat ini</h2>
        <div
          class="reservation-item bg-white rounded-xl shadow p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition"
          data-nama-pasien="Abdul Wahid"
          data-umur="35"
          data-jenis-kelamin="Laki-laki"
          data-keterangan="Kecelakaan"
          data-supir="Abdul Hasan"
          data-kendaraan="Toyota Hiace"
          data-status="Penjemputan"
          data-timestamp="14:30"
        >
          <div class="flex items-center space-x-3">
            <span class="text-yellow-500 text-xl">⚠️</span>
            <span class="text-sm font-semibold text-[#5B2EFF]"> Abdul Hasan - Toyota Hiace - B 4B1 K </span>
          </div>
          <span class="text-[#5B2EFF] text-xl font-bold">›</span>
        </div>
      </section>

      <section>
        <h2 class="text-sm font-semibold text-gray-700 mb-2">Riwayat Reservasi</h2>
        <div class="space-y-2">
          <div
            class="reservation-item bg-white rounded-xl shadow p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition"
            data-nama-pasien="Siti Aminah"
            data-umur="52"
            data-jenis-kelamin="Perempuan"
            data-keterangan="Pemeriksaan Rutin"
            data-supir="Budi Santoso"
            data-kendaraan="Suzuki APV"
            data-status="Selesai"
            data-timestamp="Kemarin, 10:00"
          >
            <div class="flex items-center space-x-3">
              <span class="text-green-500 text-xl">✔️</span>
              <span class="text-sm font-semibold text-[#5B2EFF]"> Budi Santoso - Suzuki APV - B 123 CDE </span>
            </div>
            <span class="text-[#5B2EFF] text-xl font-bold">›</span>
          </div>
        </div>
      </section>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-inner px-6 py-3 flex justify-around items-center border-t">
      <a href="home.html" class="flex flex-col items-center text-gray-500 hover:text-[#5B2EFF]">
        <img src="assets/img/Home-Button.svg" alt="Beranda" class="h-6 w-6" />
        <span class="text-xs mt-1">Beranda</span>
      </a>

      <a href="reservasi.html" class="flex flex-col items-center text-[#5B2EFF]">
        <div class="bg-[#EFE8FF] p-2 rounded-full">
          <img src="assets/img/Request-Button-Active.svg" alt="Request" class="h-6 w-6" />
        </div>
        <span class="text-xs mt-1 font-semibold">Request</span>
      </a>

      <a href="profile.html" class="flex flex-col items-center text-gray-500 hover:text-[#5B2EFF]">
        <img src="assets/img/Profile-Button.svg" alt="Profil" class="h-6 w-6" />
        <span class="text-xs mt-1">Profil</span>
      </a>
    </nav>

    <div id="reservationModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden">
      <div id="modalBox" class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md relative">
        <button id="closeModal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl">&times;</button>

        <h2 class="text-xl font-bold text-center mb-6 text-gray-800">Detail Reservasi</h2>
        <div class="grid grid-cols-1 gap-y-6 mb-8">
          <div class="space-y-3">
            <h3 class="text-lg font-bold text-[#5B2EFF]">Pasien</h3>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Nama</span>
              <span id="modal-nama-pasien" class="font-semibold text-gray-900 text-right"></span>
            </div>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Umur</span>
              <span id="modal-umur" class="font-semibold text-gray-900"></span>
            </div>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Jenis Kelamin</span>
              <span id="modal-jenis-kelamin" class="font-semibold text-gray-900"></span>
            </div>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Keterangan</span>
              <span id="modal-keterangan" class="font-semibold text-gray-900 text-right"></span>
            </div>
          </div>
          <div class="space-y-3">
            <h3 class="text-lg font-bold text-[#5B2EFF]">Reservasi Supir</h3>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Supir</span>
              <span id="modal-supir" class="font-semibold text-gray-900 text-right"></span>
            </div>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Kendaraan</span>
              <span id="modal-kendaraan" class="font-semibold text-gray-900 text-right"></span>
            </div>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Status</span>
              <span id="modal-status" class="font-semibold text-gray-900"></span>
            </div>
            <div class="flex justify-between border-b pb-2">
              <span class="text-gray-500">Timestamp</span>
              <span id="modal-timestamp" class="font-semibold text-gray-900"></span>
            </div>
          </div>
        </div>
        <button id="cancelButton" class="w-full bg-red-500 text-white font-bold py-3 rounded-lg hover:bg-red-600 transition-colors">Batalkan Reservasi</button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const modal = document.getElementById("reservationModal");
        const modalBox = document.getElementById("modalBox");
        const closeModalBtn = document.getElementById("closeModal");
        const cancelButton = document.getElementById("cancelButton");

        // Fungsi untuk membuka modal
        const openModal = (data) => {
          // Mengisi data ke dalam modal
          document.getElementById("modal-nama-pasien").textContent = data.namaPasien;
          document.getElementById("modal-umur").textContent = data.umur;
          document.getElementById("modal-jenis-kelamin").textContent = data.jenisKelamin;
          document.getElementById("modal-keterangan").textContent = data.keterangan;
          document.getElementById("modal-supir").textContent = data.supir;
          document.getElementById("modal-kendaraan").textContent = data.kendaraan;
          document.getElementById("modal-status").textContent = data.status;
          document.getElementById("modal-timestamp").textContent = data.timestamp;

          // Menampilkan atau menyembunyikan tombol "Batalkan"
          if (data.status.toLowerCase() === "selesai") {
            cancelButton.classList.add("hidden");
          } else {
            cancelButton.classList.remove("hidden");
          }

          modal.classList.remove("hidden");
        };

        // Fungsi untuk menutup modal
        const closeModal = () => {
          modal.classList.add("hidden");
        };

        // Event listener untuk setiap item reservasi
        document.querySelectorAll(".reservation-item").forEach((item) => {
          item.addEventListener("click", () => {
            const data = {
              namaPasien: item.dataset.namaPasien,
              umur: item.dataset.umur,
              jenisKelamin: item.dataset.jenisKelamin,
              keterangan: item.dataset.keterangan,
              supir: item.dataset.supir,
              kendaraan: item.dataset.kendaraan,
              status: item.dataset.status,
              timestamp: item.dataset.timestamp,
            };
            openModal(data);
          });
        });

        // Event listener untuk tombol close, tombol batal, dan klik di luar modal
        closeModalBtn.addEventListener("click", closeModal);
        cancelButton.addEventListener("click", () => {
          // Di sini bisa ditambahkan logika pembatalan
          alert("Reservasi dibatalkan!");
          closeModal();
        });
        modal.addEventListener("click", (event) => {
          if (event.target === modal) {
            closeModal();
          }
        });
      });
    </script>
  </body>
</html>
